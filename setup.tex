% ---------------------------------------------------------------
% page layout
% ---------------------------------------------------------------
\setcounter{tocdepth}{3}  % Inhaltsverzeichnis bis Subsubsection
\setcounter{secnumdepth}{3} % Nummerierung bis Subsubsection

\usepackage{geometry}
%\geometry{twoside,inner=2.5cm, top=2cm, outer=2cm, bottom = 2cm, includefoot, includehead} %wider
\geometry{top=2.5cm,inner=2.5cm,outer=2.5cm,bottom=2.5cm,headheight=5ex,headsep=3ex} % higher
% \setlength{\parskip}{1em} %table of content spacing
\usepackage{enumitem}% http://ctan.org/pkg/enumitem 



% General stuff

\usepackage{fixltx2e}
\usepackage[utf8]{inputenc} % CHANGE HERE IF NECESSARY
\usepackage[T1]{fontenc}
\usepackage[ngerman, english]{babel} % last language given is used (here: english)
\usepackage{lmodern}
%\usepackage{microtype}
\usepackage{ifpdf}
\usepackage{ifthen}

\usepackage{emptypage}
\usepackage[super]{nth} % 1st , 2nd

%%%%%% MACROS %%%%%%
\usepackage{xspace} % Nur dann ein Leerzeichen, wenn das nÃ¤chste Zeichen kein Satzzeichen ist.
\newcommand{\SecII}{Sec\textsuperscript{2}\xspace}
\newcommand{\SAML}{\acr{SAML}\xspace}
\newcommand{\XML}{\acr{XML}\xspace}
%%%%%% %%%%%%

% Load packages ...

% Corporate Design
\usepackage{eso-pic}
\usepackage{color}
% Comment out if the RUB fonts are installed
% Link: https://noc.rub.de/~jobsanzl/latex/rubtexfonts-0.4.tar.gz
%\usepackage{rubfonts2009} 
\newcommand{\setrubfontnormal}[1]{\fontfamily{rubscala}\fontsize{#1}{1}\selectfont}
\newcommand{\setrubfontextra}[1]{\fontfamily{rubflama}\fontsize{#1}{1}\selectfont}
\definecolor{rubgreen}{cmyk}{0.5,0,1,0}
\definecolor{rubblue}{cmyk}{1,0.5,0,0.6}

% Figures
\usepackage{graphicx, wrapfig}
\usepackage{subfig}
\usepackage{placeins}
\usepackage{chngcntr}
\usepackage{epstopdf}  
\usepackage{float}
\usepackage{grffile}
\usepackage{rotating}

\usepackage[font=small,labelfont=bf]{caption}
\captionsetup{justification=centering}

% Tables
\usepackage{booktabs}
\usepackage{marvosym}
\usepackage{multirow}
\usepackage{longtable}
\usepackage{makecell}

% Math stuff and units
\usepackage{latexsym,amsmath, amssymb, amsfonts, upgreek}
\usepackage{siunitx}
\newcommand{\mathup}{\mathrm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{gensymb}
\newcommand{\bs}{\ensuremath{\backslash}}

%appendix
\usepackage{appendix}

% Enable quotes by \enquote{}
\usepackage[babel,english=american, german=quotes]{csquotes}

% Necessary for frontpage, allows to create automata and fancy graphics
\usepackage{tikz}

% Protocols and bytefields
\usepackage{protocol}
\usepackage{bytefield}

% Source code listings
\newcommand{\code}[1]{\texttt{#1}}
\definecolor{colIdentifier}{rgb}{0,0,0}
\definecolor{colComments}{rgb}{0.5,0.5,0.5}
\definecolor{colKeys}{rgb}{0,0,1}
\definecolor{colString}{rgb}{0,0.6,0}

\usepackage{caption}
\usepackage{listings}
\lstset{%
	float=hbp,%
	basicstyle=\ttfamily\scriptsize, %
	identifierstyle=\color{colIdentifier}, %
	keywordstyle=\color{colKeys}, %
	stringstyle=\color{colString}, %
	commentstyle=\color{colComments}, %
	columns=flexible, %
	tabsize=2, %
	aboveskip={1.5\baselineskip}, %
	frame=single, %
	extendedchars=true, %
	showspaces=false, %
	showstringspaces=false, %
	numberstyle=\tiny, %
	breaklines=true, %
	backgroundcolor=, %
	breakautoindent=true, %
	captionpos=b%
}

% Algorithms
\usepackage[ruled, vlined, linesnumbered,algochapter,algo2e]{algorithm2e}

%% use some standards for mathematical expressions:
\newcommand{\red}{{\rm red}}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
% \newtheorem{definition}[theorem]{Definition}
\newtheorem{algorithm}[theorem]{Algorithm}
\newenvironment{example}{\begin{quote}{\bf Example:}}{\end{quote}}

% gray definition boxes, that whay you'll find them in the text
\usepackage{shadethm}
\newshadetheorem{sthm}[figure]{Definition}
\newenvironment{definition}[1][]{
   \definecolor{shadethmcolor}{rgb}{.9,.9,.9}
   \begin{sthm}[#1]
 }{\end{sthm}}

% experimental
%\usepackage{scrhack}

% Hyperlinks and menu for your document
\usepackage[breaklinks,hyperindex,colorlinks,anchorcolor=black,citecolor=black,filecolor=black,linkcolor=black,menucolor=black,urlcolor=black,pdftex]{hyperref} % pagebackref: Add page number to the references where they can be found
% DO NOT LOAD ANY OF YOUR PACKAGES BEYOND THIS PACKAGE

\makeatletter
\AtBeginDocument{
 \hypersetup{
   pdftitle = {\@title},
   pdfauthor = {\@author},
   pdfsubject={\@title},
   pdfkeywords={SAML, add more}, % CHANGE HERE
%    unicode={true},
 }
}
\makeatother

\usepackage{hyperref}
\usepackage{cleveref}

% Use the same counter for tables and figures
\makeatletter
\AtBeginDocument{
\let\c@table\c@figure
\let\c@lstlisting\c@table
\let\c@algocf\c@lstlisting
}
\makeatother

\ifpdf
	\hypersetup{linktocpage=false} 	% false=links are section names, true=links are page numbers, IMPORTANT: in dvi2ps mode, 'true' is required!
\else
	\hypersetup{linktocpage=true} 		% false=links are section names, true=links are page numbers, IMPORTANT: in dvi2ps mode, 'true' is required!
	\usepackage[hyphenbreaks]{breakurl}
\fi

% ---------------------------------------------------------------
% headers anf footers
% ---------------------------------------------------------------
\usepackage{fancyhdr} % conflict with scrpage2
\fancypagestyle{firstPageOfChapter}{%
	\fancyhead{} %clear the header
	\fancyfoot{} %clear the footer
	%\newgeometry{inner=2.5cm, top=8cm, outer=2cm, bottom = 2cm}
	%\topmargin = 8cm
	%\textheight = 6cm
	%\headheight = 8cm
	%\headsep = 8cm
	\fancyfoot[R]{\thepage}
	\renewcommand{\headrulewidth}{0.0pt}
	\renewcommand{\footrulewidth}{0.5pt}
	
}

\fancypagestyle{chapterStyle}{
	
	\fancyhf{}
	
	
	\fancyhead[LE]{\leftmark}
	\fancyhead[RO]{\rightmark}
	
	\fancyfoot{} %clear the footer
	\fancyfoot[R]{\thepage}
	
	\renewcommand{\headrulewidth}{0.5pt}
	\renewcommand{\footrulewidth}{0.5pt}
}

\fancypagestyle{startStyle}
{%
	\fancyhf{} % clear all header and footer fields
	\fancyfoot[R]{\thepage }
	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0.5pt}
}
\renewcommand{\subsectionmark}[1]{\markright{\thesubsection~-~#1}}
\renewcommand{\sectionmark}[1]{\markleft{\thesection~-~#1}}

\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}





% Bibliography
% BIBTEX, http://merkel.zoneo.net/Latex/natbib.php
\usepackage[backend=biber]{biblatex}
% if you uncomment this block, you'll get an german bibliography with alphanumerical references
%\usepackage{bibgerm} % u. a. statt et al
%\usepackage[square,numbers]{natbib} % eckige klammern, natbib-package
% \setbibpreamble{{\large Seitenzahlen, auf denen ein Eintrag referenziert wird, werden am Ende eines jeden Eintrags angegeben.}\newline} % Wegen der pagebackref-Option des hyperref-Packets, wird vielen nicht direkt klar was das soll http://projekte.dante.de/DanteFAQ/Verzeichnisse#16




% Glossary
%%%%For Glossaries %%%%%%
\usepackage[nonumberlist, acronym, toc, automake]{glossaries}
\setlength{\glsdescwidth}{15cm}

\newglossary[slg]{symbolslist}{syi}{syg}{Symbols} % create add. symbolslist
\glsaddkey{unit}{\glsentrytext{\glslabel}}{\glsentryunit}{\GLsentryunit}{\glsunit}{\Glsunit}{\GLSunit}
\newglossarystyle{symbunitlong}{%
	\setglossarystyle{long3col}% base this style on the list style
	\renewenvironment{theglossary}{% Change the table type --> 3 columns
		\begin{longtable}{lp{0.8\glsdescwidth}>{\centering\arraybackslash}p{2cm}}}%
		{\end{longtable}}%
	%
	\renewcommand*{\glossaryheader}{%  Change the table header
		\bfseries Symbol & \bfseries Description & \bfseries Unit \\
		\hline
		\endhead}
	\renewcommand*{\glossentry}[2]{%  Change the displayed items
		\glstarget{##1}{\glossentryname{##1}} %
		& \glossentrydesc{##1}% Description
		& \glsunit{##1}  \tabularnewline
	}
}








